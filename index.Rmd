---
title: "Computational Musicology: Corpus"
author: "Tara Yu"
date: "2/15/2023"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
---

<style>
body {
  background:  rgb(130, 92, 128, 0.2);
}
.navbar-inverse {                /* navbar */
    background-color:  rgb(130, 92, 128, 0.7);
    border-color: white;
}
.navbar-inverse .navbar-nav>.active > a, .navbar-inverse .navbar-nav>.active > a:hover, .navbar-inverse .navbar-nav>.active > a:focus {
  color: #ffffff;
  background-color: rgb(209, 72, 67, 0.45);     /* active tab */
}
.navbar-inverse .navbar-nav>li > a:hover, .navbar-inverse .navbar-nav > li > a:focus {
  color: #ffffff;
  background-color: rgb(209, 72, 67, 0.45);    /* inactive tab on hover/focus */
}
.sidebar.section.sidebar {    /* sidebar */
  background-color: #ffffff;
}
.nav-tabs-custom > .nav-tabs > li.active {    /* tabset border color */
  border-top-color: rgb(209, 72, 67, 0.45);
}
/* navbar (dropdown) color */
.navbar-inverse .dropdown-menu > li > a:hover, .navbar-inverse .dropdown-menu > li > a:focus {
  background-color: rgb(209, 72, 67, 0.45);
  color: #ffffff;
}
/* navbar (dropdown) color */
.navbar-inverse .dropdown-menu > .active > a, .navbar-inverse .dropdown-menu > .active > a:hover, .navbar-inverse .dropdown-menu > .active > a:focus {
  background-color: rgb(209, 72, 67, 0.45);
  color: #ffffff;
}
/* navbar (dropdown) color */
.navbar-inverse .navbar-nav>.open>a, .navbar-inverse .navbar-nav>.open>a:hover, .navbar-inverse .navbar-nav>.open>a:focus {
  background-color: rgb(209, 72, 67, 0.45);
  color: #ffffff;
}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(flexdashboard)
library(tidyverse)
library(spotifyr)
library(compmus)
library(plotly)

tameImpala <- get_artist_audio_features('tame impala')
jimiHendrix <- get_artist_audio_features('jimi hendrix')

currents <- c('2X485T9Z5Ly0xyaghN73ed','1cCbsojaA6GIT7Y3zuMJ1q', '1UYj8qTWjneZJDVjUMwMub', '0xtIp0lgccN85GfGOekS5L', '5M4yti0QxgqJieUYaEXcpw', '79chzfFIIq7cHkqcYYORk0', '6K4t31amVTZDgR3sKmwUJJ', '4a9fW33mYR8LhXBOLUhbfF', '2gNfxysfBRfl9Lvi9T3v6R', '2O99aywAVBhaPrsiJ6zbSS', '3I7OmVsk4Hm5LBbs2GmhlD', '5h9hkYIBWTZYFRmF6Iz1gt', '52ojopYMUzeNcudsoz7O9D')
currentsFeatures <- get_track_audio_features(currents)

elecLadyland <- c('4COmeKH1pLNNpXcgtMcyQH', '3Yh64aiu2ANBwDFztyPDkT', '1ntxpzIUbSsizvuAy6lTYY', '0auKlivXpm76wR63mMJ3pR', '1jhH7vvy8hoHuc0mGuZsLX', '1HFj7yC7uZfqjWuoH6DO9r', '0KqHJXm4Z42fELkW83ZW0r', '1DfWmv1eJU1a9tuGpqKGFP', '36SULeBeglappJysOY6WzQ', '0xwG5stzrc5B70TycPwenY', '5uDpwSGjljhIgDB1ZYdp9c', '3q3gK9I4mj03565IGtVA0d', '0xKcrFF5ed7U4EPdG6vE4f', '6p5RohbRLDSjeERMZ90hMg', '2aoo2jlRnM3A0NyLQqMN2f', '2AxCeJ6PSsBYiTckM0HLY7')
elecLadylandFeatures <- get_track_audio_features(elecLadyland)

tlikID <- '6K4t31amVTZDgR3sKmwUJJ'
bomlID <- '36SULeBeglappJysOY6WzQ'

```

Introduction
=====================================  

Column {.sidebar data-width=400}
-----------------------------------------------------------------------

### The Secrets Behind Psychedelic Rock

Psychedelic rock emerged as a style of rock music in early 1960s. As you may have guessed from its name, the inspiration for this genre mainly came from hallucinogens that can "expand your mind" and guide you into an otherworldly trip (think LSD or magic mushrooms). It uses intense electronic sound effects and extended instrumental solos to imitate the drug-induced state that psychedelic users go through. 

For this project, I will be mainly focusing on the secrets in the evolution of psychedelic rock from when it was born to today -- what techniques were used differently and how did that change what the songs want to convey? Specifically, I will be focusing on two bands that represent an era in psychedelic rock: Jimi Hendrix (who is almost synonymous with psychedelic rock when it was born) and Tame Impala (widely regarded as one of the most successful modern psychedelic rock bands).

To the right is a brief background of both bands as well as their playlists -- feel free to take a look and get familiar with their music! 

<!-- ```{r, fig.width=5, fig.height=5} -->
<!-- knitr::include_graphics("images/coverImage.jpeg") -->
<!-- ``` -->

<!-- ![](images/coverImage.jpeg){width=50%} -->


Column {.tabset}
-----------------------------------------------------------------------

### Background

#### Tame Impala

![](images/tameImpalaBand.jpeg){width=100%}

Tame Impala is a musical project primarily consisting of Kevin Parker, a multi-instrumentalist and producer from Perth, Australia. The music of Tame Impala is known for its psychedelic and dreamy soundscapes, with Parker often experimenting with various production techniques to create a unique and otherworldly atmosphere. The music draws inspiration from a range of genres, including psychedelic rock, funk, and electronic music, and often features intricate instrumentation and rich harmonies. I will be examining his top album *Currents* and his top hit "The Less I Know The Better" in the rest of this corpus. 

### Playlist

<iframe src="https://open.spotify.com/embed/album/79dL7FLiJFOO0EoehUHQBv?utm_source=generator" height="100%" width="100%" style="border: none" allowfullscreen="" allow="autoplay" data-external="1"></iframe>

Column {.tabset}
-----------------------------------------------------------------------

### Background

#### Jimi Hendrix

Jimi Hendrix was an American musician, singer, and songwriter who is widely regarded as one of the most influential and innovative guitarists in the history of rock music. His style of playing was characterized by his innovative use of distortion, feedback, and wah-wah effects, which he used to create a unique sound that was both melodic and psychedelic. He was also known for his flamboyant stage presence and his use of showmanship, which helped to make him a popular figure in the counterculture of the 1960s. As a result, he became a leading figure in this movement of psychedelic rock, and his music was heavily influenced by his experiences with LSD and other psychedelic drugs. I will be examining his top album *Electric Ladyland* and his top hit "The Burning of the Midnight Lamp" in the rest of this corpus. \n \n \n

![](images/jimiHendrix.jpeg){width=100%}

### Playlist

<iframe src="https://open.spotify.com/embed/album/5z090LQztiqh13wYspQvKQ?utm_source=generator" height="100%" width="100%" style="border: none;" allowfullscreen="" allow="autoplay" data-external="1"></iframe>


Tempo vs. Energy {data-navmenu=Album\ Analysis}
=====================================================================

Column {.tabset data-width=30%}
-------------------------------------------------

### Tame Impala: Graph

<!-- #### bpm -->
<!-- ```{r echo=FALSE, fig.width=30} -->
<!-- library(flexdashboard) -->
<!-- gauge(42, min = 0, max = 100, symbol = 'bpm', gaugeSectors( -->
<!--   success = c(80, 100), warning = c(40, 79), danger = c(0, 39) -->
<!-- )) -->
<!-- ``` -->

<!-- #### energy -->
<!-- ```{r echo=FALSE } -->
<!-- library(flexdashboard) -->
<!-- gauge(0.7, min = 0, max = 1.0, symbol = 'energy', gaugeSectors( -->
<!--   success = c(0.80, 1.00), warning = c(0.40, 0.79), danger = c(0, 0.39) -->
<!-- )) -->
<!-- ``` -->

<!-- # ```{r tameimpala1, echo=FALSE} -->
<!-- # library(ggplot2) -->
<!-- # library(tidyverse) -->
<!-- # library(spotifyr) -->
<!-- # library(compmus) -->
<!-- # -->
<!-- # tameImpala <- get_artist_audio_features('tame impala') -->
<!-- # ggplot(tameImpala, aes(x = tempo, y = energy, size = valence, color = album_name)) + geom_point() + ggtitle("Tame Impala Analysis") -->
<!-- # -->
<!-- # ``` -->

```{r tameimpala1, echo=FALSE}
p <- ggplot(currentsFeatures, aes(x = tempo, y = energy, size = valence, color = mode)) + geom_point() + ggtitle("Currents")
ggplotly(p)
currentsMeanTempo <- currentsFeatures %>% summarize(meanTempo = mean(tempo), meanEnergy = mean(energy))
```

### Tame Impala: Analysis

Tame Impala's album, Currents, generally follows a pretty fast BPM that falls between 100 - 150, with a median of 125.01 BPM. Almost all thirteen songs but three fall within this range. It also has a very high energy level -- eleven songs have an energy level that is greater than 0.6, with the album median at about 0.74 From this, we can infer that the album is very energetic and feels loud and fast. In addition to that, the majority of the songs use major scales (indicated by blue circles that represent a major as a 1 in the plot).

It's interesting to note that the valence levels of this album is very neutral. Its median is at 0.45, meaning that its musical positiveness is not at either extreme. It is very neutral despite its high energy levels and its use of major scales, which are typically associated with creating a happy or uplifting mood. 

Column {.tabset data-width=30%}
-------------------------------------------------

### Jimi Henrix: Graph

```{r jimiHendrix1, echo=FALSE}
p <- ggplot(elecLadylandFeatures, aes(x = tempo, y = energy, size = valence, color = mode)) + geom_point() + ggtitle("Electric Ladyland")
ggplotly(p)
```

### Jimi Hendrix: Analysis

In Jimi Hendrix's album, Electric Ladyland, it is important to note that the track "Moon, Turn the Tides... Gently Gently Away" lies outside the general range of all values of other songs. This is because it is an interlude song within the album, and its purpose was to connect the tracks "1983... (A Merman I Should Turn to Be)" and "Still Raining, Still Dreaming".

Electric Ladyland also follows a typically fast BPM, but it is more moderato than allegro. It's median is at 113.19 BPM, which falls into the moderate range of beats in music. It also has a median valence value of 0.54 and median energy level of 0.81, indicating that it is a relatively loud and fast album despite also being neutral in terms of musical positivity. It also uses major scales for most of its songs. 

Column {.tabset data-width=30%}
-------------------------------------------------

#### Compare

The two scatterplots shown on the left represent the relationship between each album's tempo, energy, valence, and mode. I wanted to focus on these factors first because to me, pschydelic music is heavily involved with beats and the energy/mood that it brings to its audience. You can click through the tabs to view each album's individual analysis first, then come back for the compare and contrast.

In general, the two albums are actually very similar in the four factors involved. They both had very similar median values for tempo, valence, and energy, and both used mainly major scales. Electric Ladyland had a slightly slower tempo (a difference of 11.92 BPM between the medians), but it also has a slightly higher energy and valence level (a difference of 0.09 in valence and 0.07 in energy). 

This was interesting to me because I had thought that a faster tempo is often correlated with more energy, as fast music often brings people to dance and closer to experiencing positivity. However, when examining these two albums, it seems like Currents had a quicker tempo but remained relatively neutral in inducing emotions in its audience, while The Burning of the Midnight Lamp had a slower tempo but was able to bring out more in its listeners. 

Key Histograms {data-orientation=rows data-navmenu=Album\ Analysis}
===================================================

Row {data-height=75}
-------------------------------------------------

### Background

Musical keys have always been associated with emotional or qualitative characteristics. One of the most widely spread descriptions of such characteristics was produced by Christian Schubart in his work *Ideen zu einer Aesthetik der Tonkunst* in 1806. I wanted to see what keys did Tame Impala and Jimi Hendrix use: was there a key that they used very often? If so, what did they want to convey through that? I will be evaluating using [Shubart's work](https://wmich.edu/mus-theo/courses/keys.html).

Row {data-height=250}
-------------------------------------------------

### Tame Impala {data-width=500}

Tame Impala favored using the C major key throughout his entire discography, with D# (Eb) major and G major coming in second and third. The C major is known to resemble a character's innocence and freedom from burden; the D# major is related to love and conversation with God; and, the G major represents gentleness and peacefulness. It seems like Tame Impala's music triggers the audience's desire to stay pure and gentle, and their overwhelming use of the C major taps into their listeners' inner-selves. This also correlates with the genre of psychedelic rock because the use of psychedelics is linked to an increasing sense of the mind and opens up the user to themselves.

### Tame Impala: Histogram

```{r tameImpala2, echo=FALSE, fig.width=6, fig.height=2}
ggplot(tameImpala, aes(x=key, fill=factor(mode))) + geom_bar() + scale_x_discrete(name = "key", labels=c("C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"), limits= c(0,1,2,3,4,5,6,7,8,9,10,11)) + scale_fill_discrete(name="mode", labels=c("minor","major"))
```

Row {data-height=250}
-------------------------------------------------

### Jimi Hendrix {data-width=500}

Jimi Hendrix uses two main keys throughout his entire discography: the C# (Db) major and the G# (Ab) major. The C# major represents grief and sadness, and it brings out unusual characters and feelings. Similarly, the G# major is associated with death and grave. What's interesting is that these two keys are not commonly used in popular music; however, it is very clear that Hendrix still favors these two keys over the others as there is a clear distinction between the frequency of C# and G# and the remaining keys. These characteristics contribute to the genre of psychedelic rock because the combination of the use of two unusual keys, as well as the negative feelings that they introduce to the audience, was able to contribute to a tonal ambiguity. As a result, Hendrix was able to produce a dreamlike quality in his music that is characteristic of the psychedelic genre.

### Jimi Hendrix: Histogram

```{r jimiHendrix2, echo=FALSE, fig.width=6, fig.height=2}
ggplot(jimiHendrix, aes(x=key, fill=factor(mode))) + geom_bar() + scale_x_discrete(name = "key" , labels=c("C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"), limits= c(0,1,2,3,4,5,6,7,8,9,10,11)) + scale_fill_discrete(name="mode", labels=c("minor","major"))
```

Tempograms {data-navmenu=Top\ Hit\ Analysis}
===================================================

Column {.tabset}
-------------------------------------------------

### "The Less I Know The Better"

Using the energy-based novelty function, we can see that the tempo in the first 30 seconds of "The Less I Know The Better" is quite interesting. It seems to be grouped in triplets. -- will add more analysis --

On the other hand, its pitches seem to follow a very consistent pattern in the first 30 seconds. A peak will first occur, then it will be followed by a series of 2 smaller peaks. This can be seen in periods such as between 20s - 22.5s. -- will add more analysis -- 

### "Burning of the Midnight Lamp"

Analysis

Column 
-------------------------------------------------

### "The Less I Know The Better": Tempo

``` {r tameImpala5, echo=FALSE}
tlik <-
  get_tidy_audio_analysis(tlikID) |>
  select(segments) |>
  unnest(segments)

tlikplot <- tlik |>
  mutate(loudness_max_time = start + loudness_max_time) |>
  arrange(loudness_max_time) |>
  mutate(delta_loudness = loudness_max - lag(loudness_max)) |>
  ggplot(aes(x = loudness_max_time, y = pmax(0, delta_loudness))) +
  geom_line() +
  xlim(0, 30) +
  theme_minimal() +
  labs(x = "Time (s)", y = "Novelty")

ggplotly(tlikplot)
```

### "The Less I Know The Better": Pitches

``` {r tameImpala6, echo=FALSE}
tlik <-
  get_tidy_audio_analysis(tlikID) |>
  select(segments) |>
  unnest(segments)

tlikplot <- tlik |>
  mutate(pitches = map(pitches, compmus_normalise, "clr")) |>
  arrange(start) |>
  mutate(pitches = map2(pitches, lag(pitches), `-`)) |>
  slice(-1) |> 
  compmus_gather_chroma() |> 
  group_by(start, duration) |> 
  summarise(novelty = sum(log1p(pmax(value, 0)))) |> 
  ggplot(aes(x = start + duration / 2, y = novelty)) +
  geom_line() +
  xlim(0, 30) +
  theme_minimal() +
  labs(x = "Time (s)", y = "Novelty")

ggplotly(tlikplot)
```


Column
--------------------------------------------------

### "Burning of the Midnight Lamp": Tempo

``` {r boml4, echo=FALSE}
boml <-
  get_tidy_audio_analysis(bomlID) |>
  select(segments) |>
  unnest(segments)

bomlplot <- boml |>
  mutate(loudness_max_time = start + loudness_max_time) |>
  arrange(loudness_max_time) |>
  mutate(delta_loudness = loudness_max - lag(loudness_max)) |>
  ggplot(aes(x = loudness_max_time, y = pmax(0, delta_loudness))) +
  geom_line() +
  xlim(0, 30) +
  theme_minimal() +
  labs(x = "Time (s)", y = "Novelty")

ggplotly(bomlplot)
```

### "Burning of the Midnight Lamp": Pitches

``` {r boml5, echo=FALSE}
boml <-
  get_tidy_audio_analysis(bomlID) |>
  select(segments) |>
  unnest(segments)

bomlplot <- boml |>
  mutate(pitches = map(pitches, compmus_normalise, "clr")) |>
  arrange(start) |>
  mutate(pitches = map2(pitches, lag(pitches), `-`)) |>
  slice(-1) |> 
  compmus_gather_chroma() |> 
  group_by(start, duration) |> 
  summarise(novelty = sum(log1p(pmax(value, 0)))) |> 
  ggplot(aes(x = start + duration / 2, y = novelty)) +
  geom_line() +
  xlim(0, 30) +
  theme_minimal() +
  labs(x = "Time (s)", y = "Novelty")

ggplotly(bomlplot)
```

Harmony and Chord {data-navmenu=Top\ Hit\ Analysis}
===================================================

### title

<!-- ``` {r tameImpala4, echo=FALSE} -->
<!-- library(ggplot2) -->
<!-- library(tidyverse) -->
<!-- library(spotifyr) -->
<!-- library(compmus) -->

<!-- theLessIKnowID <- '6K4t31amVTZDgR3sKmwUJJ' -->

<!-- circshift <- function(v, n) { -->
<!--   if (n == 0) v else c(tail(v, n), head(v, -n)) -->
<!-- } -->

<!-- #      C     C#    D     Eb    E     F     F#    G     Ab    A     Bb    B -->
<!-- major_chord <- -->
<!--   c(   1,    0,    0,    0,    1,    0,    0,    1,    0,    0,    0,    0) -->
<!-- minor_chord <- -->
<!--   c(   1,    0,    0,    1,    0,    0,    0,    1,    0,    0,    0,    0) -->
<!-- seventh_chord <- -->
<!--   c(   1,    0,    0,    0,    1,    0,    0,    1,    0,    0,    1,    0) -->

<!-- major_key <- -->
<!--   c(6.35, 2.23, 3.48, 2.33, 4.38, 4.09, 2.52, 5.19, 2.39, 3.66, 2.29, 2.88) -->
<!-- minor_key <- -->
<!--   c(6.33, 2.68, 3.52, 5.38, 2.60, 3.53, 2.54, 4.75, 3.98, 2.69, 3.34, 3.17) -->

<!-- chord_templates <- -->
<!--   tribble( -->
<!--     ~name, ~template, -->
<!--     "Gb:7", circshift(seventh_chord, 6), -->
<!--     "Gb:maj", circshift(major_chord, 6), -->
<!--     "Bb:min", circshift(minor_chord, 10), -->
<!--     "Db:maj", circshift(major_chord, 1), -->
<!--     "F:min", circshift(minor_chord, 5), -->
<!--     "Ab:7", circshift(seventh_chord, 8), -->
<!--     "Ab:maj", circshift(major_chord, 8), -->
<!--     "C:min", circshift(minor_chord, 0), -->
<!--     "Eb:7", circshift(seventh_chord, 3), -->
<!--     "Eb:maj", circshift(major_chord, 3), -->
<!--     "G:min", circshift(minor_chord, 7), -->
<!--     "Bb:7", circshift(seventh_chord, 10), -->
<!--     "Bb:maj", circshift(major_chord, 10), -->
<!--     "D:min", circshift(minor_chord, 2), -->
<!--     "F:7", circshift(seventh_chord, 5), -->
<!--     "F:maj", circshift(major_chord, 5), -->
<!--     "A:min", circshift(minor_chord, 9), -->
<!--     "C:7", circshift(seventh_chord, 0), -->
<!--     "C:maj", circshift(major_chord, 0), -->
<!--     "E:min", circshift(minor_chord, 4), -->
<!--     "G:7", circshift(seventh_chord, 7), -->
<!--     "G:maj", circshift(major_chord, 7), -->
<!--     "B:min", circshift(minor_chord, 11), -->
<!--     "D:7", circshift(seventh_chord, 2), -->
<!--     "D:maj", circshift(major_chord, 2), -->
<!--     "F#:min", circshift(minor_chord, 6), -->
<!--     "A:7", circshift(seventh_chord, 9), -->
<!--     "A:maj", circshift(major_chord, 9), -->
<!--     "C#:min", circshift(minor_chord, 1), -->
<!--     "E:7", circshift(seventh_chord, 4), -->
<!--     "E:maj", circshift(major_chord, 4), -->
<!--     "G#:min", circshift(minor_chord, 8), -->
<!--     "B:7", circshift(seventh_chord, 11), -->
<!--     "B:maj", circshift(major_chord, 11), -->
<!--     "D#:min", circshift(minor_chord, 3) -->
<!--   ) -->

<!-- key_templates <- -->
<!--   tribble( -->
<!--     ~name, ~template, -->
<!--     "Gb:maj", circshift(major_key, 6), -->
<!--     "Bb:min", circshift(minor_key, 10), -->
<!--     "Db:maj", circshift(major_key, 1), -->
<!--     "F:min", circshift(minor_key, 5), -->
<!--     "Ab:maj", circshift(major_key, 8), -->
<!--     "C:min", circshift(minor_key, 0), -->
<!--     "Eb:maj", circshift(major_key, 3), -->
<!--     "G:min", circshift(minor_key, 7), -->
<!--     "Bb:maj", circshift(major_key, 10), -->
<!--     "D:min", circshift(minor_key, 2), -->
<!--     "F:maj", circshift(major_key, 5), -->
<!--     "A:min", circshift(minor_key, 9), -->
<!--     "C:maj", circshift(major_key, 0), -->
<!--     "E:min", circshift(minor_key, 4), -->
<!--     "G:maj", circshift(major_key, 7), -->
<!--     "B:min", circshift(minor_key, 11), -->
<!--     "D:maj", circshift(major_key, 2), -->
<!--     "F#:min", circshift(minor_key, 6), -->
<!--     "A:maj", circshift(major_key, 9), -->
<!--     "C#:min", circshift(minor_key, 1), -->
<!--     "E:maj", circshift(major_key, 4), -->
<!--     "G#:min", circshift(minor_key, 8), -->
<!--     "B:maj", circshift(major_key, 11), -->
<!--     "D#:min", circshift(minor_key, 3) -->
<!--   ) -->

<!-- tlik <- -->
<!--   get_tidy_audio_analysis(theLessIKnowID) |> -->
<!--   compmus_align(sections, segments) |> -->
<!--   select(sections) |> -->
<!--   unnest(sections) |> -->
<!--   mutate( -->
<!--     pitches = -->
<!--       map(segments, -->
<!--         compmus_summarise, pitches, -->
<!--         method = "mean", norm = "manhattan" -->
<!--       ) -->
<!--   ) -->

<!-- tlik |>  -->
<!--   compmus_match_pitch_template( -->
<!--     key_templates,         # Change to chord_templates if descired -->
<!--     method = "euclidean",  # Try different distance metrics -->
<!--     norm = "manhattan"     # Try different norms -->
<!--   ) |> -->
<!--   ggplot( -->
<!--     aes(x = start + duration / 2, width = duration, y = name, fill = d) -->
<!--   ) + -->
<!--   geom_tile() + -->
<!--   scale_fill_viridis_c(guide = "none") + -->
<!--   theme_minimal() + -->
<!--   labs(x = "Time (s)", y = "") -->

<!-- ``` -->

The graph shown is the chordogram for Tame Impala's "The Less I Know The Better", and it's interesting to note that every "vertical column" of the diagram represents a different harmony in the background of the sun. For the first 60 seconds of the song, indicated by the first four major vertical sections, we can see pops of yellow for the F major and the B major. They correlate with the high-pitched chimes that Tame Impala inserts into the instrumentals of the song. Between seconds 70-100, the colors across all majors are very similar shades of green; this was when the chorus happened, and the instrumentals were more mellow to support the lyrics of the chorus. The last 100 seconds of the song saw a very consistent harmony. 

It was also interesting to note the evolution of the C minor from the beginning to end, as it had the darkest boxes at the start and finish but got lighter during the middle.


Chromagram Analysis {data-navmenu=Top\ Hit\ Analysis}
==============================================================================

<!-- ``` {r tameImpala2, echo=FALSE} -->
<!-- library(ggplot2) -->
<!-- library(tidyverse) -->
<!-- library(spotifyr) -->
<!-- library(compmus) -->

<!-- theLessIKnowID <- '6K4t31amVTZDgR3sKmwUJJ' -->

<!-- tlik <- -->
<!--   get_tidy_audio_analysis(theLessIKnowID) |> -->
<!--   select(segments) |> -->
<!--   unnest(segments) |> -->
<!--   select(start, duration, pitches) -->

<!-- tlik |> -->
<!--   mutate(pitches = map(pitches, compmus_normalise, "euclidean")) |> -->
<!--   compmus_gather_chroma() |>  -->
<!--   ggplot( -->
<!--     aes( -->
<!--       x = start + duration / 2, -->
<!--       width = duration, -->
<!--       y = pitch_class, -->
<!--       fill = value -->
<!--     ) -->
<!--   ) + -->
<!--   geom_tile() + -->
<!--   labs(x = "Time (s)", y = NULL, fill = "Magnitude") + -->
<!--   theme_minimal() + -->
<!--   scale_fill_viridis_c() -->
<!-- ``` -->

<!-- *** -->

<!-- This is the chromagram of Tame Impala's biggest hit, "The Less I Know The Better".  -->
<!-- -- ADD MORE ANALYSIS --  -->


<!-- ### "The Less I Know The Better" Timbre Cepstrogram Analysis -->

<!-- ``` {r tameImpala3, echo=FALSE} -->
<!-- library(ggplot2) -->
<!-- library(tidyverse) -->
<!-- library(spotifyr) -->
<!-- library(compmus) -->

<!-- theLessIKnowID <- '6K4t31amVTZDgR3sKmwUJJ' -->

<!-- tlik <- -->
<!--   get_tidy_audio_analysis(theLessIKnowID) |> # Change URI. -->
<!--   compmus_align(tatums, segments) |>                     # Change `bars` -->
<!--   select(tatums) |>                                      #   in all three -->
<!--   unnest(tatums) |>                                      #   of these lines. -->
<!--   mutate( -->
<!--     pitches = -->
<!--       map(segments, -->
<!--         compmus_summarise, pitches, -->
<!--         method = "rms", norm = "manhattan"              # Change summary & norm. -->
<!--       ) -->
<!--   ) |> -->
<!--   mutate( -->
<!--     timbre = -->
<!--       map(segments, -->
<!--         compmus_summarise, timbre, -->
<!--         method = "rms", norm = "manhattan"              # Change summary & norm. -->
<!--       ) -->
<!--   ) -->

<!-- tlik |> -->
<!--   compmus_gather_timbre() |> -->
<!--   ggplot( -->
<!--     aes( -->
<!--       x = start + duration / 2, -->
<!--       width = duration, -->
<!--       y = basis, -->
<!--       fill = value -->
<!--     ) -->
<!--   ) + -->
<!--   geom_tile() + -->
<!--   labs(x = "Time (s)", y = NULL, fill = "Magnitude") + -->
<!--   scale_fill_viridis_c() +                               -->
<!--   theme_classic() -->

<!-- tlik |> -->
<!--   compmus_self_similarity(timbre, "cosine") |>  -->
<!--   ggplot( -->
<!--     aes( -->
<!--       x = xstart + xduration / 2, -->
<!--       width = xduration, -->
<!--       y = ystart + yduration / 2, -->
<!--       height = yduration, -->
<!--       fill = d -->
<!--     ) -->
<!--   ) + -->
<!--   geom_tile() + -->
<!--   coord_fixed() + -->
<!--   scale_fill_viridis_c(guide = "none") + -->
<!--   theme_classic() + -->
<!--   labs(x = "", y = "") -->
<!-- ``` -->

The graph to the left is a cepstrogram that represents tatums in the song "The Less I Know The Better", calculated using the Manhattan distance. There are clear changes in multiple areas. For example, c02 goes back and forth between high magnitudes and low magnitudes. c04 and c06 both start with a relatively low magnitude, then switches to a high magnitude for the rest of the track.

The graph to the right is a self-similarity matrix.


Conclusion
=====================================  

